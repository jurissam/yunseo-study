<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëŒ€í™”í˜• í•œêµ­ì‚¬ í•™ìŠµ: ê°‘ì˜¤ê°œí˜ ì™„ì „ ì •ë³µ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Study -->
    <!-- Application Structure Plan: The SPA is designed as a thematic dashboard with three main interactive sections: 'Timeline View', 'Reform Comparison', and 'Keyword Quiz'. This structure moves beyond the linear format of the source notes to offer a more flexible and engaging learning experience. Users can start with a chronological overview (Timeline), dive deep into comparative details (Comparison), and then test their knowledge (Quiz). This user-flow is designed for effective exam preparation by reinforcing information through different interactive methods. -->
    <!-- Visualization & Content Choices: 
        1. Timeline View (íë¦„ í•œëˆˆì— ë³´ê¸°): Goal: Show sequence and cause-and-effect. Method: An interactive vertical timeline using HTML/CSS (Flexbox). Interaction: Clicking an event card reveals detailed information. Justification: Visualizing the flow of events is more memorable than reading a list.
        2. Reform Comparison (ê°œí˜ ë‚´ìš© ë¹„êµí•˜ê¸°): Goal: Compare and contrast the reform phases. Method: A tabbed interface with a dynamic bar chart (Chart.js/Canvas) and text content. Interaction: Clicking tabs updates both the descriptive text and the chart, which visualizes the number of key policies in different areas (political, economic, social). Justification: Direct comparison and data visualization clarify the differences and shifting priorities of each reform stage, a common exam topic.
        3. Keyword Quiz (í•µì‹¬ ìš©ì–´ í€´ì¦ˆ): Goal: Reinforce key vocabulary. Method: Interactive multiple-choice quiz cards using HTML/JS. Interaction: Users select an answer and receive immediate feedback. Justification: Active recall through quizzing is a highly effective study method.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #F8F5F2; /* Warm Neutral Background */
        }
        .nav-btn {
            transition: all 0.3s ease;
            border-bottom: 4px solid transparent;
        }
        .nav-btn.active {
            border-bottom-color: #D97706; /* Amber-600 */
            color: #374151; /* Gray-700 */
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 19px;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: #D1D5DB; /* Gray-300 */
            z-index: -1;
        }
        .timeline-item:last-child::before {
            display: none;
        }
        .timeline-dot {
            position: absolute;
            left: 10px;
            top: 4px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 3px solid #F8F5F2;
        }
        .quiz-option:hover {
            background-color: #FEF3C7; /* Amber-100 */
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">
        
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900">ëŒ€í™”í˜• í•œêµ­ì‚¬ í•™ìŠµ</h1>
            <p class="text-lg text-gray-600 mt-2">ê°‘ì˜¤ê°œí˜ë¶€í„° ì•„ê´€íŒŒì²œê¹Œì§€, í•µì‹¬ë§Œ ì™ì™!</p>
        </header>

        <nav class="flex justify-center border-b-2 border-gray-200 mb-8">
            <button class="nav-btn active text-lg font-bold py-3 px-6 text-gray-500" data-target="timeline">íë¦„ í•œëˆˆì— ë³´ê¸°</button>
            <button class="nav-btn text-lg font-bold py-3 px-6 text-gray-500" data-target="comparison">ê°œí˜ ë‚´ìš© ë¹„êµí•˜ê¸°</button>
            <button class="nav-btn text-lg font-bold py-3 px-6 text-gray-500" data-target="quiz">í•µì‹¬ ìš©ì–´ í€´ì¦ˆ</button>
        </nav>

        <main>
            <!-- Section 1: Timeline View -->
            <section id="timeline" class="content-section active fade-in">
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-2xl font-bold mb-2">ì‚¬ê±´ì˜ íë¦„ ë”°ë¼ê°€ê¸° ğŸ—ºï¸</h2>
                    <p class="text-gray-600 mb-6">ê²©ë™ì˜ ì‹œê¸°, ê°‘ì˜¤ê°œí˜ë¶€í„° ì•„ê´€íŒŒì²œê¹Œì§€ ì£¼ìš” ì‚¬ê±´ì˜ íë¦„ì„ ì‹œê°„ ìˆœì„œëŒ€ë¡œ ë”°ë¼ê°€ ë³´ì„¸ìš”. ê° ì¹´ë“œë¥¼ í´ë¦­í•˜ë©´ ìì„¸í•œ ì„¤ëª…ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.</p>
                    <div id="timeline-container" class="relative">
                        <!-- Timeline items will be injected by JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Section 2: Comparison View -->
            <section id="comparison" class="content-section fade-in">
                 <div class="bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-2xl font-bold mb-2">ê°‘ì˜¤ãƒ»ì„ë¯¸ê°œí˜ ì‹¬ì¸µ ë¹„êµ âš–ï¸</h2>
                    <p class="text-gray-600 mb-6">1ì°¨, 2ì°¨, 3ì°¨(ì„ë¯¸) ê°œí˜ì˜ íŠ¹ì§•ê³¼ ì£¼ìš” ë‚´ìš©ì„ ë¹„êµí•´ ë´…ì‹œë‹¤. íƒ­ì„ ëˆŒëŸ¬ ê° ê°œí˜ì˜ ë‚´ìš©ì„ í™•ì¸í•˜ê³ , ì•„ë˜ ì°¨íŠ¸ë¥¼ í†µí•´ ê°œí˜ì˜ ì„±ê²© ë³€í™”ë¥¼ ì‹œê°ì ìœ¼ë¡œ íŒŒì•…í•´ ë³´ì„¸ìš”.</p>
                    <div class="flex border-b border-gray-300 mb-4">
                        <button class="comparison-tab active flex-1 py-2 text-center font-semibold" data-reform="1">1ì°¨ ê°‘ì˜¤ê°œí˜</button>
                        <button class="comparison-tab flex-1 py-2 text-center font-semibold text-gray-500" data-reform="2">2ì°¨ ê°‘ì˜¤ê°œí˜</button>
                        <button class="comparison-tab flex-1 py-2 text-center font-semibold text-gray-500" data-reform="3">3ì°¨ ì„ë¯¸ê°œí˜</button>
                    </div>
                    <div id="comparison-content" class="mb-6">
                        <!-- Comparison content will be injected by JavaScript -->
                    </div>
                    <div class="chart-container">
                        <canvas id="reformChart"></canvas>
                    </div>
                 </div>
            </section>

            <!-- Section 3: Quiz View -->
            <section id="quiz" class="content-section fade-in">
                 <div class="bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-2xl font-bold mb-2">ì‹¤ë ¥ ì ê²€! í•µì‹¬ í€´ì¦ˆ âœï¸</h2>
                    <p class="text-gray-600 mb-6">ê³µë¶€í•œ ë‚´ìš©ì„ ì˜ ê¸°ì–µí•˜ê³  ìˆëŠ”ì§€ í€´ì¦ˆë¡œ í™•ì¸í•´ ë´…ì‹œë‹¤. ì •ë‹µì´ë¼ê³  ìƒê°í•˜ëŠ” ë³´ê¸°ë¥¼ í´ë¦­í•˜ì„¸ìš”!</p>
                    <div id="quiz-container" class="space-y-6">
                        <!-- Quiz items will be injected by JavaScript -->
                    </div>
                    <div id="quiz-result" class="hidden text-center mt-8">
                        <h3 class="text-2xl font-bold">í€´ì¦ˆ ê²°ê³¼</h3>
                        <p class="text-5xl my-4"><span id="score"></span> / <span id="total-questions"></span></p>
                        <p id="result-message" class="text-lg font-semibold mb-4"></p>
                        <button id="retry-quiz" class="bg-amber-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-700 transition">ë‹¤ì‹œ í’€ê¸°</button>
                    </div>
                </div>
            </section>
        </main>
        
        <footer class="text-center mt-12 text-gray-500">
            <p>&copy; 2025 Interactive History Learning. All rights reserved.</p>
        </footer>

    </div>

    <script>
        const data = {
            timeline: [
                {
                    year: '1894ë…„ 6ì›”',
                    title: '1ì°¨ ê°‘ì˜¤ê°œí˜ ì‹œì‘',
                    description: 'ì¼ë³¸ì´ ê²½ë³µê¶ì„ ì ë ¹í•˜ê³  êµ°êµ­ê¸°ë¬´ì²˜ë¥¼ ì„¤ì¹˜í•˜ì—¬ ê°œí˜ì„ ì£¼ë„í–ˆì–´ìš”. ì²­ì¼ì „ìŸ ì¤‘ì´ë¼ ì¼ë³¸ì˜ ê°„ì„­ì€ ìƒëŒ€ì ìœ¼ë¡œ ì ì—ˆì£ . ì´ë•Œ ì‹ ë¶„ì œ íì§€, ê³¼ê±°ì œ íì§€ ë“± ì¤‘ìš”í•œ ê°œí˜ì´ ì´ë£¨ì–´ì¡Œë‹µë‹ˆë‹¤.',
                    color: 'bg-sky-500'
                },
                {
                    year: '1894ë…„ 7ì›”',
                    title: 'ì²­ì¼ì „ìŸ ë°œë°œ',
                    description: 'ì¡°ì„ ì˜ ì§€ë°°ê¶Œì„ ë‘ê³  ì²­ë‚˜ë¼ì™€ ì¼ë³¸ì´ ì „ìŸì„ ì‹œì‘í–ˆì–´ìš”. ì´ ì „ìŸì˜ ìŠ¹íŒ¨ê°€ ì•ìœ¼ë¡œì˜ ê°œí˜ ë°©í–¥ì— í° ì˜í–¥ì„ ë¯¸ì¹˜ê²Œ ë©ë‹ˆë‹¤.',
                    color: 'bg-red-500'
                },
                {
                    year: '1894ë…„ 11ì›”',
                    title: '2ì°¨ ê°‘ì˜¤ê°œí˜ ì‹œì‘',
                    description: 'ì²­ì¼ì „ìŸì—ì„œ ì¼ë³¸ì˜ ìŠ¹ì„¸ê°€ êµ³ì–´ì§€ì, ë°•ì˜íš¨ê°€ ê·€êµ­í•˜ì—¬ ê¹€í™ì§‘ê³¼ ì—°ë¦½ ë‚´ê°ì„ êµ¬ì„±í–ˆì–´ìš”. ì´ë•Œë¶€í„° ì¼ë³¸ì˜ ì ê·¹ì ì¸ ê°„ì„­ì´ ì‹œì‘ë˜ì—ˆê³ , 8ë„ë¥¼ 23ë¶€ë¡œ ê°œí¸í•˜ëŠ” ë“± í–‰ì • ê°œí˜ì´ ì´ë£¨ì–´ì¡ŒìŠµë‹ˆë‹¤.',
                    color: 'bg-blue-500'
                },
                {
                    year: '1895ë…„ 4ì›”',
                    title: 'ì‹œëª¨ë…¸ì„¸í‚¤ ì¡°ì•½ & ì‚¼êµ­ê°„ì„­',
                    description: 'ì²­ì¼ì „ìŸì—ì„œ ìŠ¹ë¦¬í•œ ì¼ë³¸ì€ ì‹œëª¨ë…¸ì„¸í‚¤ ì¡°ì•½ìœ¼ë¡œ ë´ì˜¤ë‘¥ ë°˜ë„ë¥¼ ì–»ì—ˆì–´ìš”. í•˜ì§€ë§Œ ëŸ¬ì‹œì•„, í”„ë‘ìŠ¤, ë…ì¼ì´ ì´ë¥¼ ë°˜í™˜í•˜ë¼ê³  ì••ë°•í–ˆì£ . ì´ê²ƒì´ ë°”ë¡œ "ì‚¼êµ­ê°„ì„­"! ê²°êµ­ ì¼ë³¸ì€ ë´ì˜¤ë‘¥ ë°˜ë„ë¥¼ í¬ê¸°í•˜ê²Œ ë©ë‹ˆë‹¤.',
                    color: 'bg-purple-500'
                },
                {
                    year: '1895ë…„ 8ì›”',
                    title: 'ì„ë¯¸ì‚¬ë³€ ë°œìƒ',
                    description: 'ì‚¼êµ­ê°„ì„­ìœ¼ë¡œ ìœ„ì‹ ì´ ë–¨ì–´ì§„ ì¼ë³¸ì´ ì¡°ì„ ì— ëŒ€í•œ ì˜í–¥ë ¥ì„ íšŒë³µí•˜ê¸° ìœ„í•´ ëª…ì„±í™©í›„ë¥¼ ì‹œí•´í•˜ëŠ” ë”ì°í•œ ë§Œí–‰ì„ ì €ì§ˆë €ì–´ìš”. ì´ ì‚¬ê±´ìœ¼ë¡œ ì¡°ì„ ì¸ë“¤ì˜ ë°˜ì¼ ê°ì •ì´ ê·¹ì— ë‹¬í–ˆìŠµë‹ˆë‹¤.',
                    color: 'bg-gray-700'
                },
                {
                    year: '1895ë…„ 10ì›”',
                    title: '3ì°¨ ê°‘ì˜¤ê°œí˜ (ì„ë¯¸ê°œí˜)',
                    description: 'ì„ë¯¸ì‚¬ë³€ ì´í›„ ì¹œì¼ ì„¸ë ¥ì´ ì£¼ë„í•˜ì—¬ ë‹¨ë°œë ¹, íƒœì–‘ë ¥ ì‚¬ìš© ë“±ì˜ ê°œí˜ì„ ì¶”ì§„í–ˆì–´ìš”. íŠ¹íˆ ìƒíˆ¬ë¥¼ ìë¥´ë¼ëŠ” ë‹¨ë°œë ¹ì€ ë°±ì„±ë“¤ì˜ ê±°ì„¼ ë°˜ë°œì„ ë¶ˆëŸ¬ì¼ìœ¼ì¼œ ì„ë¯¸ì˜ë³‘ì˜ ì›ì¸ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.',
                    color: 'bg-green-500'
                },
                {
                    year: '1896ë…„ 2ì›”',
                    title: 'ì•„ê´€íŒŒì²œ',
                    description: 'ì„ë¯¸ì‚¬ë³€ê³¼ ë‹¨ë°œë ¹ ë“±ìœ¼ë¡œ ì‹ ë³€ì— ìœ„í˜‘ì„ ëŠë‚€ ê³ ì¢…ì´ ëŸ¬ì‹œì•„ ê³µì‚¬ê´€ìœ¼ë¡œ í”¼ì‹ í•œ ì‚¬ê±´ì´ì—ìš”. "ì•„ê´€"ì€ ì•„ë¼ì‚¬(ëŸ¬ì‹œì•„)ì˜ ê³µê´€ì´ë¼ëŠ” ëœ»ì´ëë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì„ë¯¸ê°œí˜ì€ ì¤‘ë‹¨ë˜ì—ˆì–´ìš”.',
                    color: 'bg-yellow-500'
                }
            ],
            reforms: {
                '1': {
                    title: '1ì°¨ ê°‘ì˜¤ê°œí˜',
                    summary: 'êµ°êµ­ê¸°ë¬´ì²˜ ì¤‘ì‹¬ìœ¼ë¡œ ì§„í–‰ë˜ì—ˆìœ¼ë©°, ì²­ì¼ì „ìŸ ì¤‘ì´ë¼ ì¼ë³¸ì˜ ê°„ì„­ì´ ë¹„êµì  ì ì–´ ìì£¼ì ì¸ ì„±ê²©ì˜ ê°œí˜ì´ ë§ì•˜ìŠµë‹ˆë‹¤.',
                    points: [
                        { category: 'ì •ì¹˜', content: 'ê°œêµ­ê¸°ë…„ ì‚¬ìš©, 6ì¡°â†’8ì•„ë¬¸ ê°œí¸, êµ­ë‚´ë¶€ ì„¤ì¹˜(ì™•ì‹¤/ì •ë¶€ ë¶„ë¦¬)' },
                        { category: 'ê²½ì œ', content: 'ì¬ì • ì¼ì›í™”(íƒì§€ì•„ë¬¸), ì€ ë³¸ìœ„ í™”í ì œë„, ì¡°ì„¸ì˜ ê¸ˆë‚©í™”' },
                        { category: 'ì‚¬íšŒ', content: 'ì‹ ë¶„ì œÂ·ê³¼ê±°ì œ íì§€, ê³ ë¬¸Â·ì—°ì¢Œì œ íì§€, ì¡°í˜¼ ê¸ˆì§€' }
                    ],
                    chartData: [4, 3, 4]
                },
                '2': {
                    title: '2ì°¨ ê°‘ì˜¤ê°œí˜',
                    summary: 'ì²­ì¼ì „ìŸì—ì„œ ì¼ë³¸ì´ ìŠ¹ë¦¬í•œ í›„ ë°•ì˜íš¨ê°€ ì°¸ì—¬í•˜ë©° ì¼ë³¸ì˜ ê°„ì„­ì´ ë³¸ê²©í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ì§€ë°© ì œë„ë¥¼ ê°œí¸í•˜ê³  ê·¼ëŒ€ì  êµìœ¡ ì œë„ë¥¼ ë„ì…í–ˆìŠµë‹ˆë‹¤.',
                    points: [
                        { category: 'ì •ì¹˜', content: 'ë‚´ê° 7ë¶€ì œ, 8ë„â†’23ë¶€ë¡œ ê°œí¸, ì§€ë°©ê´€ ê¶Œí•œ ì¶•ì†Œ(ì‚¬ë²•/êµ°ì‚¬ê¶Œ ë°•íƒˆ)' },
                        { category: 'ì‚¬ë²•', content: 'ì¬íŒì†Œ ì„¤ì¹˜ë¥¼ í†µí•œ ì‚¬ë²•ê¶Œ ë…ë¦½' },
                        { category: 'êµìœ¡', content: 'êµìœ¡ì…êµ­ì¡°ì„œ ë°˜í¬, í•œì„±ì‚¬ë²”í•™êµ ë“± ê·¼ëŒ€ í•™êµ ì„¤ë¦½' }
                    ],
                    chartData: [3, 1, 2]
                },
                '3': {
                    title: '3ì°¨ ì„ë¯¸ê°œí˜',
                    summary: 'ì„ë¯¸ì‚¬ë³€ ì´í›„ ì¹œì¼ ë‚´ê°ì´ ì£¼ë„í–ˆìœ¼ë©°, ê¸‰ì§„ì ì¸ ê°œí˜(ë‹¨ë°œë ¹)ìœ¼ë¡œ êµ­ë¯¼ì  ë°˜ë°œì„ ìƒ€ìŠµë‹ˆë‹¤.',
                    points: [
                        { category: 'ì‚¬íšŒ/ë¬¸í™”', content: 'íƒœì–‘ë ¥ ì‚¬ìš©, ë‹¨ë°œë ¹ ê°•í–‰, ì¢…ë‘ë²• ì‹œí–‰' },
                        { category: 'êµ°ì‚¬', content: 'ì¤‘ì•™ì— ì¹œìœ„ëŒ€, ì§€ë°©ì— ì§„ìœ„ëŒ€ ì„¤ì¹˜' },
                        { category: 'í†µì‹ ', content: 'ìš°í¸ì‚¬ë¬´ ì¬ê°œ (ìš°ì •ì´êµ­ ì¬ì„¤ì¹˜)' }
                    ],
                    chartData: [0, 2, 3]
                }
            },
            quiz: [
                {
                    question: "ê°‘ì˜¤ê°œí˜ ì‹œê¸°, êµ­ê°€ ì¬ì •ì„ í•˜ë‚˜ë¡œ í†µí•©í•˜ì—¬ ê´€ë¦¬í•˜ë„ë¡ í•œ ì¤‘ì‹¬ ê¸°êµ¬ëŠ” ì–´ë””ì˜€ì„ê¹Œìš”?",
                    options: ["êµ°êµ­ê¸°ë¬´ì²˜", "ì˜ì •ë¶€", "íƒì§€ì•„ë¬¸", "êµ­ë‚´ë¶€"],
                    answer: "íƒì§€ì•„ë¬¸"
                },
                {
                    question: "ì¼ë³¸ì´ ì²­ì¼ì „ìŸ ìŠ¹ë¦¬ í›„ ì–»ì€ ë´ì˜¤ë‘¥ ë°˜ë„ë¥¼ ëŸ¬ì‹œì•„, í”„ë‘ìŠ¤, ë…ì¼ì˜ ì••ë ¥ìœ¼ë¡œ ë‹¤ì‹œ ë°˜í™˜í•œ ì‚¬ê±´ì€ ë¬´ì—‡ì¼ê¹Œìš”?",
                    options: ["ì„ë¯¸ì‚¬ë³€", "ì•„ê´€íŒŒì²œ", "ì‹œëª¨ë…¸ì„¸í‚¤ ì¡°ì•½", "ì‚¼êµ­ê°„ì„­"],
                    answer: "ì‚¼êµ­ê°„ì„­"
                },
                {
                    question: "ì„ë¯¸ê°œí˜ ë‚´ìš© ì¤‘ ë°±ì„±ë“¤ì˜ ê°€ì¥ í° ë°˜ë°œì„ ì‚¬ì„œ ì˜ë³‘ ìš´ë™ì˜ ì§ì ‘ì ì¸ ì›ì¸ì´ ëœ ê²ƒì€ ë¬´ì—‡ì¼ê¹Œìš”?",
                    options: ["íƒœì–‘ë ¥ ì‚¬ìš©", "ë‹¨ë°œë ¹", "ì¢…ë‘ë²• ì‹œí–‰", "ì§„ìœ„ëŒ€ ì„¤ì¹˜"],
                    answer: "ë‹¨ë°œë ¹"
                },
                {
                    question: "1ì°¨ ê°‘ì˜¤ê°œí˜ì˜ ë‚´ìš©ìœ¼ë¡œ ì˜³ì§€ ì•Šì€ ê²ƒì€?",
                    options: ["ê³¼ê±°ì œ íì§€", "ì‹ ë¶„ì œ íì§€", "8ë„ë¥¼ 23ë¶€ë¡œ ê°œí¸", "ì€ ë³¸ìœ„ í™”í ì œë„"],
                    answer: "8ë„ë¥¼ 23ë¶€ë¡œ ê°œí¸"
                },
                 {
                    question: "ê³ ì¢…ì´ ì¼ë³¸ì˜ ìœ„í˜‘ì„ í”¼í•´ ëŸ¬ì‹œì•„ ê³µì‚¬ê´€ìœ¼ë¡œ í”¼ì‹ í•œ ì‚¬ê±´ì„ ë¬´ì—‡ì´ë¼ê³  í• ê¹Œìš”?",
                    options: ["ê°‘ì‹ ì •ë³€", "ì•„ê´€íŒŒì²œ", "ì„ë¯¸ì‚¬ë³€", "ì‚¼êµ­ê°„ì„­"],
                    answer: "ì•„ê´€íŒŒì²œ"
                }
            ]
        };

        document.addEventListener('DOMContentLoaded', () => {
            const navButtons = document.querySelectorAll('.nav-btn');
            const contentSections = document.querySelectorAll('.content-section');
            const timelineContainer = document.getElementById('timeline-container');
            const comparisonTabs = document.querySelectorAll('.comparison-tab');
            const comparisonContent = document.getElementById('comparison-content');
            const quizContainer = document.getElementById('quiz-container');

            // Initial setup
            loadTimeline();
            loadComparison('1');
            loadQuiz();
            
            // Main navigation
            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');

                    contentSections.forEach(section => {
                        section.classList.remove('active');
                        if (section.id === button.dataset.target) {
                            section.classList.add('active');
                        }
                    });
                });
            });

            // Timeline interaction
            function loadTimeline() {
                timelineContainer.innerHTML = data.timeline.map(item => `
                    <div class="timeline-item relative pl-12 pb-8 cursor-pointer group">
                        <div class="timeline-dot ${item.color}"></div>
                        <p class="font-bold text-lg">${item.year} - ${item.title} <span class="text-sm text-gray-500">(í´ë¦­)</span></p>
                        <div class="description hidden mt-2 p-4 bg-gray-50 rounded-lg border border-gray-200">
                            <p>${item.description}</p>
                        </div>
                    </div>
                `).join('');

                timelineContainer.querySelectorAll('.timeline-item').forEach(item => {
                    item.addEventListener('click', () => {
                        item.querySelector('.description').classList.toggle('hidden');
                    });
                });
            }

            // Comparison interaction
            // chart instance is now managed directly within updateChart via Chart.getChart()
            function loadComparison(reformId) {
                const reformData = data.reforms[reformId];
                comparisonContent.innerHTML = `
                    <div class="fade-in">
                        <h3 class="text-xl font-bold mb-2">${reformData.title}</h3>
                        <p class="text-gray-600 mb-4">${reformData.summary}</p>
                        <ul class="space-y-2">
                            ${reformData.points.map(point => `
                                <li><span class="font-semibold inline-block w-20 text-right mr-2 bg-amber-100 text-amber-800 px-2 py-1 rounded">${point.category}</span> ${point.content}</li>
                            `).join('')}
                        </ul>
                    </div>
                `;
                updateChart('reformChart', reformData); // Pass canvasId and data to updateChart
            }

            // Refactored updateChart to manage chart instance
            function updateChart(canvasId, reformData) {
                const canvas = document.getElementById(canvasId);
                const ctx = canvas.getContext('2d');

                // Get existing chart instance on this canvas
                let existingChart = Chart.getChart(canvas); 

                // If a chart instance already exists, destroy it to avoid conflicts
                if (existingChart) {
                    existingChart.destroy();
                }

                // Create a new chart instance
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['ì •ì¹˜/ì‚¬ë²•', 'ê²½ì œ', 'ì‚¬íšŒ/ë¬¸í™”/êµ°ì‚¬'],
                        datasets: [{
                            label: 'ì£¼ìš” ê°œí˜ ì •ì±… ìˆ˜',
                            data: reformData.chartData,
                            backgroundColor: [
                                'rgba(59, 130, 246, 0.6)',
                                'rgba(16, 185, 129, 0.6)',
                                'rgba(249, 115, 22, 0.6)'
                            ],
                            borderColor: [
                                'rgba(59, 130, 246, 1)',
                                'rgba(16, 185, 129, 1)',
                                'rgba(249, 115, 22, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 5,
                                ticks: {
                                    stepSize: 1
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            title: {
                                display: true,
                                text: `${reformData.title} ì£¼ìš” ì •ì±… ë¶„ì•¼`,
                                font: {
                                    size: 16
                                }
                            }
                        }
                    }
                });
            }
            
            comparisonTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    comparisonTabs.forEach(t => {
                        t.classList.remove('active', 'text-gray-800');
                        t.classList.add('text-gray-500');
                    });
                    tab.classList.add('active', 'text-gray-800');
                    tab.classList.remove('text-gray-500');
                    loadComparison(tab.dataset.reform);
                });
            });


            // Quiz interaction
            let userAnswers = {};
            function loadQuiz() {
                quizContainer.innerHTML = data.quiz.map((q, index) => `
                    <div class="quiz-item border border-gray-200 p-4 rounded-lg">
                        <p class="font-bold mb-3">${index + 1}. ${q.question}</p>
                        <div class="space-y-2" data-question-index="${index}">
                            ${q.options.map(opt => `
                                <div class="quiz-option p-3 rounded-lg border-2 border-gray-200 cursor-pointer">${opt}</div>
                            `).join('')}
                        </div>
                        <div class="feedback mt-2"></div>
                    </div>
                `).join('');
                document.getElementById('quiz-result').classList.add('hidden');
                document.getElementById('retry-quiz').addEventListener('click', () => {
                    userAnswers = {};
                    loadQuiz();
                });

                quizContainer.querySelectorAll('.quiz-option').forEach(option => {
                    option.addEventListener('click', e => {
                        const questionIndex = e.target.parentElement.dataset.questionIndex;
                        const selectedAnswer = e.target.textContent;
                        
                        if (userAnswers[questionIndex]) return;

                        userAnswers[questionIndex] = selectedAnswer;
                        const correctAnswer = data.quiz[questionIndex].answer;
                        const feedbackEl = e.target.parentElement.nextElementSibling;
                        const options = e.target.parentElement.children;

                        for(let opt of options) {
                            opt.style.pointerEvents = 'none'; // Disable further clicks
                            if(opt.textContent === correctAnswer) {
                                opt.classList.remove('border-gray-200');
                                opt.classList.add('border-green-500', 'bg-green-50');
                            }
                        }

                        if (selectedAnswer === correctAnswer) {
                            feedbackEl.innerHTML = `<p class="text-green-600 font-semibold">ì •ë‹µì…ë‹ˆë‹¤! ğŸ‘</p>`;
                        } else {
                            e.target.classList.remove('border-gray-200');
                            e.target.classList.add('border-red-500', 'bg-red-50');
                            feedbackEl.innerHTML = `<p class="text-red-600 font-semibold">ì•„ì‰¬ì›Œìš”! ì •ë‹µì€ "${correctAnswer}" ì…ë‹ˆë‹¤.</p>`;
                        }

                        if(Object.keys(userAnswers).length === data.quiz.length) {
                            showResults();
                        }
                    });
                });
            }
            
            function showResults() {
                let score = 0;
                data.quiz.forEach((q, index) => {
                    if(userAnswers[index] === q.answer) {
                        score++;
                    }
                });

                const resultEl = document.getElementById('quiz-result');
                document.getElementById('score').textContent = score;
                document.getElementById('total-questions').textContent = data.quiz.length;
                
                const messageEl = document.getElementById('result-message');
                if (score === data.quiz.length) {
                    messageEl.textContent = "ì™„ë²½í•´ìš”! ë‹¹ì‹ ì€ ê°‘ì˜¤ê°œí˜ ë§ˆìŠ¤í„°!";
                    messageEl.className = "text-lg font-semibold mb-4 text-blue-600";
                } else if (score >= data.quiz.length / 2) {
                    messageEl.textContent = "ì˜í–ˆì–´ìš”! ì¡°ê¸ˆë§Œ ë” ë³µìŠµí•´ë´ìš”.";
                    messageEl.className = "text-lg font-semibold mb-4 text-green-600";
                } else {
                    messageEl.textContent = "ì•„ì§ í—·ê°ˆë¦¬ëŠ” ë¶€ë¶„ì´ ìˆë„¤ìš”. ë‹¤ì‹œ í•œë²ˆ ë³µìŠµí•´ë´…ì‹œë‹¤!";
                     messageEl.className = "text-lg font-semibold mb-4 text-orange-600";
                }

                resultEl.classList.remove('hidden');
                resultEl.scrollIntoView({ behavior: 'smooth' });
            }

        });
    </script>
</body>
</html>
